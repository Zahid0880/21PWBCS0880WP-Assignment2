<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Book Categories</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="styles.css">
 <style>
    /* Add your custom styles here */
  </style>
</head>
<body>
  <section>
    <div class="ogo">
      <h1>King</h1>
    </div>
    <div class="header">
    <ul class="nav justify-content-center">
      <li class="nav-item">
        <a class="nav-link active" aria-current="page" href="index.html">Home</a>
      </li>
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="categories.html" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
          categories
        </a>
        <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
  
  
  
          
          <li><a class="dropdown-item" href="categories.html">Fiction</a></li>
          <li><a class="dropdown-item" href="#bookRow">Dystopian</a></li>
          <li><a class="dropdown-item" href="#bookRow">Classic</a></li>
          <li><a class="dropdown-item" href="#bookRow">Science Fiction</a></li>
          <li><a class="dropdown-item" href="#bookRow">Fantasy</a></li>
          <li><a class="dropdown-item" href="#bookRow">Mystery</a></li>
          <li><a class="dropdown-item" href="#bookRow">Mystery</a></li>
          <li><a class="dropdown-item" href="#bookRow">Mystery</a></li>
          <li><a class="dropdown-item" href="#bookRow">Mystery</a></li>
          <li><a class="dropdown-item" href="#bookRow">Historical Fiction</a></li>
          <li><a class="dropdown-item" href="#bookRow">Gothic</a></li>
          <li><a class="dropdown-item" href="#bookRow">Horror</a></li>
          <li><a class="dropdown-item" href="#bookRow">Psychological</a></li>
          <li><a class="dropdown-item" href="#bookRow">Philosophical</a></li>
          <li><a class="dropdown-item" href="#bookRow">Contemporary</a></li>
          <li><a class="dropdown-item" href="#bookRow">Adventure</a></li>
          <li><a class="dropdown-item" href="#bookRow">Autobiographical</a>
  
          </li>
          
          
          
          
        </ul>
      </li>
      
      <li class="nav-item">
        <a class="nav-link" href="cart.html">cart</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="contact.html">contact</a>
      </li>
    </ul>
  </div>
  </section><hr>

  <div class="container mt-5">
    <h1 style="text-align: center;font:bold">Explore Books by Category</h1><br>

    <div class="row mb-3">
      <div class="col-md-4">
        <label for="categoryFilter"><h3>Category:</h3></label>
        <select class="form-select" id="categoryFilter">
          <!-- Categories will be dynamically loaded here -->
        </select>
      </div>

      <div class="col-md-4">
        <label for="searchFilter"> <h3>Search by Title:</h3></label>
        <input type="text" class="form-control" id="searchFilter" placeholder="Search for books">
      </div>
      <div class="col-md-4">
        <button style="margin: 43px;;"  class="btn btn-primary" id="searchButton">Search</button>
      </div>
    </div>

    <div class="row" id="bookList">
      <!-- Books will be dynamically loaded here -->
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="js/categories.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const bookList = document.getElementById('bookList');
      const categoryFilter = document.getElementById('categoryFilter');
      const searchFilter = document.getElementById('searchFilter');
      const searchButton = document.getElementById('searchButton');

      // Fetch book data from the JSON file
      fetch('books.json')
        .then(response => response.json())
        .then(data => {
          // Initialize categories list
          const categories = new Set();
          data.forEach(book => categories.add(book.category));

          // Populate categories filter options
          categories.forEach(category => {
            const option = document.createElement('option');
            option.value = category;
            option.textContent = category;
            categoryFilter.appendChild(option);
          });

          // Filter books based on category and search input
          const filterBooks = () => {
            const selectedCategory = categoryFilter.value;
            const searchTerm = searchFilter.value.toLowerCase();

            let filteredBooks = data;
            if (selectedCategory !== 'all') {
              filteredBooks = filteredBooks.filter(book => book.category === selectedCategory);
            }

            if (searchTerm) {
              filteredBooks = filteredBooks.filter(book => book.title.toLowerCase().includes(searchTerm));
            }

            // Clear existing book list
            bookList.innerHTML = '';

            // Display filtered books
            filteredBooks.forEach(book => {
              const card = document.createElement('div');
              card.classList.add('col-md-3', 'mb-3');

              card.innerHTML = `
                <div class="card h-100">
                  <img src="${book.cover_image}" class="card-img-top" alt="${book.title}">
                  <div class="card-body">
                    <h5 class="card-title">${book.title}</h5>
                    <p class="card-text">${book.author}</p>
                    <p class="card-text">${book.description}</p>
                    <p class="card-text">$${book.price.toFixed(2)}</p>
                  </div>
                </div>
              `;

              bookList.appendChild(card);
            });
          };

          // Initial display of all books
          filterBooks();

          // Add event listeners for filter changes
          categoryFilter.addEventListener('change', filterBooks);
          searchFilter.addEventListener('input', filterBooks);
          searchButton.addEventListener('click', filterBooks);
        })
        .catch(error => console.error('Error fetching data:', error));
    });
  </script>
</body>
</html>
